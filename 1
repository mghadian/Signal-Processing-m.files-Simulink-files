<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2c3e50">Detailed Signal Generator Architecture</text>
  
  <!-- Barrage Noise Generator Section -->
  <rect x="50" y="60" width="550" height="400" fill="#ecf0f1" stroke="#e74c3c" stroke-width="3" rx="10"/>
  <text x="325" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#e74c3c">BARRAGE NOISE GENERATOR</text>
  
  <!-- PRBS Generator -->
  <rect x="70" y="110" width="120" height="60" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="130" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">PRBS</text>
  <text x="130" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">Generator</text>
  <text x="130" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">m-sequence</text>
  
  <!-- LFSR Detail -->
  <rect x="70" y="185" width="120" height="50" fill="#2980b9" stroke="#2c3e50" stroke-width="1" rx="3"/>
  <text x="130" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">LFSR</text>
  <text x="130" y="218" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">15-bit register</text>
  <text x="130" y="228" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Taps: 15,14</text>
  
  <!-- Digital Shaping Filter -->
  <rect x="220" y="110" width="120" height="80" fill="#27ae60" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="280" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">Digital</text>
  <text x="280" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">Shaping Filter</text>
  <text x="280" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">FIR/IIR</text>
  <text x="280" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">BW = 350 KHz</text>
  
  <!-- Spectral Shaping Options -->
  <rect x="220" y="200" width="120" height="50" fill="#229954" stroke="#2c3e50" stroke-width="1" rx="3"/>
  <text x="280" y="218" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">White/Pink/Brown</text>
  <text x="280" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Noise Selection</text>
  <text x="280" y="242" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">H(f) = f^(-α)</text>
  
  <!-- Amplitude Control -->
  <rect x="370" y="110" width="120" height="60" fill="#f39c12" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="430" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">Amplitude</text>
  <text x="430" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white" font-weight="bold">Control</text>
  <text x="430" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Digital Gain</text>
  
  <!-- Output Buffer -->
  <rect x="520" y="110" width="60" height="60" fill="#95a5a6" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="550" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Output</text>
  <text x="550" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Buffer</text>
  
  <!-- Noise Generator Specifications -->
  <rect x="70" y="270" width="510" height="170" fill="#ffffff" stroke="#2c3e50" stroke-width="1" rx="5"/>
  <text x="325" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Barrage Noise Implementation Details</text>
  
  <text x="90" y="315" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50" font-weight="bold">PRBS Generation:</text>
  <text x="100" y="330" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• 15-bit Linear Feedback Shift Register (LFSR)</text>
  <text x="100" y="342" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Polynomial: x¹⁵ + x¹⁴ + 1 (maximal length sequence)</text>
  <text x="100" y="354" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Period: 2¹⁵ - 1 = 32,767 samples</text>
  <text x="100" y="366" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Clock rate: 750 KHz (synchronized with DAC)</text>
  
  <text x="90" y="385" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50" font-weight="bold">Spectral Shaping:</text>
  <text x="100" y="400" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• White noise: Flat spectrum H(f) = 1</text>
  <text x="100" y="412" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Pink noise: H(f) = f⁻⁰·⁵ (-3dB/octave roll-off)</text>
  <text x="100" y="424" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Brown noise: H(f) = f⁻¹ (-6dB/octave roll-off)</text>
  
  <!-- Sweep Signal Generator Section -->
  <rect x="650" y="60" width="500" height="400" fill="#ecf0f1" stroke="#27ae60" stroke-width="3" rx="10"/>
  <text x="900" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#27ae60">SWEEP SIGNAL GENERATOR</text>
  
  <!-- Phase Accumulator -->
  <rect x="670" y="110" width="100" height="60" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="720" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Phase</text>
  <text x="720" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Accumulator</text>
  <text x="720" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">32-bit</text>
  
  <!-- Frequency Control Word Generator -->
  <rect x="670" y="185" width="100" height="60" fill="#2980b9" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="720" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">FCW</text>
  <text x="720" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Generator</text>
  <text x="720" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Linear/Log</text>
  
  <!-- Sine/Cosine LUT -->
  <rect x="790" y="110" width="100" height="80" fill="#27ae60" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="840" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Sin/Cos</text>
  <text x="840" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">LUT</text>
  <text x="840" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">1024 points</text>
  <text x="840" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">12-bit output</text>
  
  <!-- Sweep Controller -->
  <rect x="920" y="110" width="100" height="80" fill="#e67e22" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="970" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Sweep</text>
  <text x="970" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Controller</text>
  <text x="970" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Rep. Rate:</text>
  <text x="970" y="182" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">10-150 KHz</text>
  
  <!-- Output Buffer -->
  <rect x="1050" y="110" width="80" height="60" fill="#95a5a6" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="1090" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Output</text>
  <text x="1090" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white" font-weight="bold">Buffer</text>
  
  <!-- Sweep Generator Specifications -->
  <rect x="670" y="270" width="460" height="170" fill="#ffffff" stroke="#2c3e50" stroke-width="1" rx="5"/>
  <text x="900" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Sweep Signal Implementation Details</text>
  
  <text x="690" y="315" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50" font-weight="bold">Direct Digital Synthesis (DDS):</text>
  <text x="700" y="330" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• 32-bit phase accumulator for fine frequency resolution</text>
  <text x="700" y="342" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Frequency resolution: 750 KHz / 2³² ≈ 0.17 Hz</text>
  <text x="700" y="354" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• 1024-point sine/cosine lookup table</text>
  
  <text x="690" y="373" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50" font-weight="bold">Sweep Modes:</text>
  <text x="700" y="388" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Linear: f(t) = f₀ + (Δf/T)·t</text>
  <text x="700" y="400" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Logarithmic: f(t) = f₀ · 10^((log(f₁/f₀)/T)·t)</text>
  <text x="700" y="412" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Repetition period: T = 1/(10 KHz to 150 KHz)</text>
  <text x="700" y="424" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">• Programmable start/stop frequencies</text>
  
  <!-- Signal connections for Noise Generator -->
  <line x1="190" y1="140" x2="220" y2="140" stroke="#2c3e50" stroke-width="2"/>
  <line x1="340" y1="150" x2="370" y2="150" stroke="#2c3e50" stroke-width="2"/>
  <line x1="490" y1="140" x2="520" y2="140" stroke="#2c3e50" stroke-width="2"/>
  
  <!-- PRBS to LFSR connection -->
  <line x1="130" y1="170" x2="130" y2="185" stroke="#2c3e50" stroke-width="1"/>
  
  <!-- Spectral shaping connection -->
  <line x1="280" y1="190" x2="280" y2="200" stroke="#2c3e50" stroke-width="1"/>
  
  <!-- Signal connections for Sweep Generator -->
  <line x1="770" y1="140" x2="790" y2="140" stroke="#2c3e50" stroke-width="2"/>
  <line x1="890" y1="150" x2="920" y2="150" stroke="#2c3e50" stroke-width="2"/>
  <line x1="1020" y1="140" x2="1050" y2="140" stroke="#2c3e50" stroke-width="2"/>
  
  <!-- FCW to Phase Accumulator -->
  <line x1="720" y1="185" x2="720" y2="170" stroke="#2c3e50" stroke-width="2"/>
  
  <!-- Sweep Controller feedback -->
  <line x1="970" y1="190" x2="970" y2="255" stroke="#e67e22" stroke-width="2"/>
  <line x1="970" y1="255" x2="720" y2="255" stroke="#e67e22" stroke-width="2"/>
  <line x1="720" y1="255" x2="720" y2="245" stroke="#e67e22" stroke-width="2"/>
  
  <!-- Implementation Details Section -->
  <rect x="50" y="490" width="1100" height="380" fill="#f8f9fa" stroke="#2c3e50" stroke-width="2" rx="10"/>
  <text x="600" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2c3e50">IMPLEMENTATION CONSIDERATIONS</text>
  
  <!-- Left Column - Barrage Noise -->
  <rect x="80" y="540" width="500" height="310" fill="#ffffff" stroke="#e74c3c" stroke-width="2" rx="5"/>
  <text x="330" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e74c3c">Barrage Noise Generation</text>
  
  <text x="100" y="590" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">Key Parameters:</text>
  <text x="110" y="607" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• LFSR Polynomial: Primitive polynomial for maximum period</text>
  <text x="110" y="621" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Seed Value: Non-zero initial state (avoid all-zero lock-up)</text>
  <text x="110" y="635" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Filter Order: 64-128 taps for sharp 350 KHz cutoff</text>
  <text x="110" y="649" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Window Function: Kaiser window for optimal response</text>
  
  <text x="100" y="675" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">Filter Design:</text>
  <text x="110" y="692" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Cutoff frequency: fc = 350 KHz</text>
  <text x="110" y="706" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Transition band: 25 KHz (350-375 KHz)</text>
  <text x="110" y="720" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Stopband attenuation: > 60 dB</text>
  <text x="110" y="734" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Implementation: Multiply-accumulate (MAC) operations</text>
  
  <text x="100" y="760" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">Spectral Control:</text>
  <text x="110" y="777" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• White: No additional filtering</text>
  <text x="110" y="791" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Pink: 1st order IIR: H(z) = (1-z⁻¹)/(1-0.99z⁻¹)</text>
  <text x="110" y="805" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Brown: 2nd order integrator cascade</text>
  <text x="110" y="819" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Amplitude normalization to prevent overflow</text>
  
  <!-- Right Column - Sweep Signal -->
  <rect x="620" y="540" width="500" height="310" fill="#ffffff" stroke="#27ae60" stroke-width="2" rx="5"/>
  <text x="870" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#27ae60">Sweep Signal Generation</text>
  
  <text x="640" y="590" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">DDS Architecture:</text>
  <text x="650" y="607" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Phase accumulator width: 32 bits</text>
  <text x="650" y="621" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• LUT address bits: Top 10 bits of phase</text>
  <text x="650" y="635" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Output resolution: 12 bits (matches DAC)</text>
  <text x="650" y="649" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Spurious-free dynamic range: >72 dB</text>
  
  <text x="640" y="675" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">Frequency Control Word (FCW):</text>
  <text x="650" y="692" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• FCW = (fout × 2³²) / fclk</text>
  <text x="650" y="706" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Linear sweep: FCW incremented by constant ΔF</text>
  <text x="650" y="720" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Log sweep: FCW multiplied by constant factor</text>
  <text x="650" y="734" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Update rate: Every sample (750 KHz)</text>
  
  <text x="640" y="760" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50" font-weight="bold">Sweep Timing:</text>
  <text x="650" y="777" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Repetition counter: 24-bit down counter</text>
  <text x="650" y="791" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Min period: 750K/150K = 5000 samples</text>
  <text x="650" y="805" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Max period: 750K/10K = 75000 samples</text>
  <text x="650" y="819" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">• Trigger: Hardware/software configurable</text>
  
  <!-- Output labels -->
  <text x="600" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#e74c3c" font-weight="bold">Noise Out</text>
  <text x="1140" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#27ae60" font-weight="bold">Sweep Out</text>
  
  <!-- Clock distribution lines -->
  <line x1="600" y1="50" x2="600" y2="80" stroke="#2c3e50" stroke-width="2"/>
  <text x="600" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#2c3e50">750 KHz Clock</text>
</svg>
